# 短時間検証ガイド

`task deploy`は時間がかかるため、デプロイ前に短時間で検証する方法をまとめます。

## 🚀 推奨検証フロー

### 1. 超高速検証（約30秒）
```bash
task verify-fast
```
- フロントエンドのビルドのみチェック
- TypeScriptエラー、未使用変数などを検出
- **最も重要なチェック**

### 2. 標準検証（約2-3分）
```bash
task verify
```
- フロントエンドのビルド
- フロントエンドのリンター
- エージェントのリンター
- **デプロイ前の推奨チェック**

### 3. ローカル動作確認（開発中）
```bash
task dev-all
```
- ローカルで3つのサーバーを起動
- ブラウザで `http://localhost:5173` にアクセス
- 実際の動作を確認

## 📋 検証チェックリスト

### デプロイ前の必須チェック

- [ ] `task verify-fast` でフロントエンドビルドが成功
- [ ] `task verify` で全チェックが成功
- [ ] `task dev-all` でローカル動作確認（オプション）

### 各チェックの内容

| チェック | コマンド | 検出内容 | 所要時間 |
|---------|---------|---------|---------|
| **フロントエンドビルド** | `task frontend:build` | TypeScriptエラー、未使用変数、ビルドエラー | ~30秒 |
| **フロントエンドリンター** | `task frontend:lint-check` | コードスタイル、ESLintエラー | ~10秒 |
| **エージェントリンター** | `task agent:lint-check` | Pythonコードスタイル、型エラー | ~30秒 |
| **ローカル動作確認** | `task dev-all` | 実際の動作、UI表示 | 起動後すぐ |

## 🎯 よくあるエラーの検出

### `task verify-fast` で検出できるエラー

✅ **検出可能:**
- TypeScriptの型エラー
- 未使用のインポート/変数
- 構文エラー
- ビルドエラー

❌ **検出不可:**
- ランタイムエラー（実行時のみ）
- エージェントの実行エラー
- Pulumiデプロイエラー

### `task dev-all` で検出できるエラー

✅ **検出可能:**
- ランタイムエラー
- UI表示の問題
- API接続エラー
- JSON解析エラー

## 💡 実践的な使い方

### 開発中のワークフロー

```bash
# 1. コードを変更
# 2. 超高速検証
task verify-fast

# 3. 問題なければローカルで確認
task dev-all
# → ブラウザで http://localhost:5173 を開く

# 4. 動作確認後、デプロイ
task deploy
```

### 緊急修正時のワークフロー

```bash
# 1. コードを修正
# 2. 超高速検証のみ（時間節約）
task verify-fast

# 3. 問題なければ即デプロイ
task deploy
```

## ⚠️ 注意点

- `task verify-fast` はフロントエンドのみチェック
- エージェントの変更は `task agent:lint-check` で別途確認
- 完全な検証は `task verify` を推奨

